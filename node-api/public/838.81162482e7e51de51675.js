(self.webpackChunkangular=self.webpackChunkangular||[]).push([[838],{5838:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ServiceModulesModule:()=>y});var s=i(2057),r=i(6090),o=i(7988),d=i(5551),l=i(9765);class n{constructor(){this.serviceModule="",this.summary="",this.status=1}}class c{constructor(){this.serviceModule="",this.timeRequired="",this.summary=""}}var a=i(793),u=i(6633),h=i(9866),g=i(9699),Z=i(3738),v=i(337),M=i(3358),f=i(6355),p=i(5921);const m=["addEditServiceModal"],b=["deleteServiceModal"];function q(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"th",40),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.ALo(11,"date"),a.qZA(),a.TgZ(12,"td"),a.TgZ(13,"ui-switch",41),a.NdJ("change",function(){const t=a.CHM(e).$implicit;return a.oxw().changeServiceStatus(t)})("ngModelChange",function(t){return a.CHM(e).$implicit.status=t}),a.qZA(),a.qZA(),a.TgZ(14,"td",9),a.TgZ(15,"div",42),a.TgZ(16,"button",43),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().showAddEditModal(t)}),a._UZ(17,"i",44),a.qZA(),a.TgZ(18,"button",45),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().showDeleteModal(t)}),a._UZ(19,"i",46),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=t.index;a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(e.serviceModule),a.xp6(2),a.Oqu(e.timeRequired),a.xp6(2),a.Oqu(e.summary),a.xp6(2),a.Oqu(a.xi3(11,6,e.createdAt,"d/M/yyyy")),a.xp6(3),a.Q6J("ngModel",e.status)}}function A(e,t){1&e&&(a.TgZ(0,"p",47),a._uU(1," This Service Module Already Exists, please try another one. "),a.qZA())}const T=function(){return{backdrop:"static",keyboard:!1,animated:!0}},S=[{path:"",component:(()=>{class e{constructor(e,t,i,s,r){this.serviceModulesService=e,this.alertService=t,this.spinner=i,this.toastr=s,this.globalService=r,this.subject=new l.xQ,this.title="Manage Service Modules | Estimation Calculator",this.serviceModulesInfo=new n,this.serviceModulesList=[],this.checkserviceExists=!1,this.datatableElement=o.G,this.dtOptions={},this.dtTrigger=new l.xQ,this.config={},this.addEditServiceModal=d.oB,this.deleteServiceModal=d.oB,this.requiredValidation=new c,this.inValidateCheck={timeRequired:!1},this.getServiceModulesList()}ngOnInit(){this.dtOptions={responsive:!0,scrollX:!0,scrollY:"350px",scrollCollapse:!0,columnDefs:[{targets:3,orderable:!1,searchable:!1},{targets:5,orderable:!1,searchable:!1},{targets:6,orderable:!1,searchable:!1}]},this.globalService.getPageTitle(this.title)}ngAfterViewInit(){this.dtTrigger.next()}getServiceModulesList(){this.serviceModulesService.getServiceModules().subscribe(e=>{this.spinner.show(),200===e.status&&(this.spinner.hide(),this.datatableElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(),this.serviceModulesList=e.data,this.spinner.hide()}))},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}closeModel(){this.addEditServiceModal.hide(),this.deleteServiceModal.hide()}showAddEditModal(e){this.alertService.clear(),this.checkserviceExists=!1,this.serviceModulesInfo=e&&e._id?Object.assign({},e):new n,this.addEditServiceModal.show()}showDeleteModal(e){this.serviceModulesInfo=e,this.deleteServiceModal.show()}checkvalidation(e){return Object.assign({},this.serviceModulesInfo)[e]?"text-primary":"text-danger"}patternMatchCheck(e,t){if(e){const i=this.globalService.patternMatchRegex(e,t);console.log("validate",i),this.inValidateCheck[t]=i}else this.inValidateCheck[t]=!1}serviceExistCheck(e){if(e)if(this.serviceModulesList.length){let t=this.serviceModulesList.find(t=>e._id?e._id!==t._id&&t.serviceModule.toLowerCase()===e.serviceModule.toLowerCase():t.serviceModule.toLowerCase()===e.serviceModule.toLowerCase());this.checkserviceExists=!!t}else this.checkserviceExists=!1;else this.checkserviceExists=!1}addService(){const e=Object.keys(this.requiredValidation);let t=JSON.parse(JSON.stringify(this.serviceModulesInfo));const i=e.filter(e=>!t[e]);if(this.spinner.show(),i.length)return this.alertService.clear(),this.alertService.error("*Please Fill All Fields are mandatory."),this.spinner.hide(),!1;let s=JSON.parse(JSON.stringify(this.serviceModulesInfo));this.serviceModulesService.saveServiceInfo(s).subscribe(e=>{200===e.status&&(this.spinner.hide(),this.toastr.success(e.message,"Success!"),e=e.data,this.closeModel(),this.getServiceModulesList())},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}changeServiceStatus(e){this.serviceModulesService.saveServiceInfo({_id:e._id,status:e.status?0:1}).subscribe(e=>{if(200===e.status){this.spinner.hide(),e=e.data,this.toastr.success("Service status has been changed successfully.","Success!");let t=this.serviceModulesList.findIndex(t=>t._id===e._id);t&&(this.serviceModulesList[t].status=e.status)}},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}deleteService(){this.spinner.show(),this.serviceModulesService.deleteService(this.serviceModulesInfo).subscribe(e=>{200===e.status&&(this.closeModel(),this.spinner.hide(),this.getServiceModulesList(),this.toastr.success(e.message,"Success"))},e=>{this.closeModel(),this.spinner.hide(),this.toastr.error("There are some server error.Please check connection.","Error")})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.V4),a.Y36(u.c9),a.Y36(h.t2),a.Y36(g._W),a.Y36(u.Uh))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-service-modules"]],viewQuery:function(e,t){if(1&e&&(a.Gf(o.G,5),a.Gf(m,5),a.Gf(b,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.datatableElement=e.first),a.iGM(e=a.CRH())&&(t.addEditServiceModal=e.first),a.iGM(e=a.CRH())&&(t.deleteServiceModal=e.first)}},decls:89,vars:17,consts:[[1,"d-flex","flex-row"],[1,"col-12"],[1,"opacity-50"],[1,"container-fluid","app-region","bg-white","py-3","dataDisplaySection"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-sm","btn-primary","ms-3",3,"click"],[1,"fas","fa-plus","me-2"],["datatable","","id","serviceModule",1,"table","table-bordered","table-hover","table-striped",3,"dtOptions","dtTrigger"],[1,"text-nowrap"],[1,"text-center"],[1,"text-wrap"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"config"],["addEditServiceModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","row-xs","align-items-center","mg-b-20"],[1,"mb-3"],["for","serviceModule",1,"form-label"],[3,"ngClass"],[1,"fas","fa-star","fa-xs"],["type","text","id","serviceModule","maxlength","35","placeholder","Enter Service Module","name","serviceModule","characterOnly","",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger mt-1 mb-0","role","alert",4,"ngIf"],["for","timeRequired",1,"form-label"],["type","text","id","timeRequired","placeholder","Enter Required Time","name","timeRequired","maxlength","4","numbersOnly","",1,"form-control",3,"ngModel","ngModelChange"],["for","summary",1,"form-label"],["id","summary","rows","5","placeholder","Enter Summary",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer","border-top-0","justify-content-start"],["type","submit",1,"btn","btn-primary",3,"click"],["deleteServiceModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"fa","fa-trash"],[1,"modal-footer","border-top-0","d-flex","justify-content-start"],["type","button",1,"btn","btn-default","me-1",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["scope","row"],["color","#4285F4","defaultBgColor","#d9d9d9","labelOn","Active","labelOff","Inactive",3,"ngModel","change","ngModelChange"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","edit","me-1",3,"click"],[1,"far","fa-edit"],["type","button",1,"btn","btn-sm","delete",3,"click"],[1,"far","fa-trash-alt"],["role","alert",1,"alert","alert-danger","mt-1","mb-0"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h4",2),a._uU(3," Manage Service Modules "),a.qZA(),a._UZ(4,"hr"),a.qZA(),a.qZA(),a.TgZ(5,"div",3),a.TgZ(6,"div",4),a.TgZ(7,"div"),a.TgZ(8,"button",5),a.NdJ("click",function(){return t.showAddEditModal()}),a._UZ(9,"i",6),a._uU(10,"Add New"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"table",7),a.TgZ(12,"thead"),a.TgZ(13,"tr",8),a.TgZ(14,"th"),a._uU(15,"S.No"),a.qZA(),a.TgZ(16,"th"),a._uU(17,"Service Module"),a.qZA(),a.TgZ(18,"th"),a._uU(19,"Required(Hrs.)"),a.qZA(),a.TgZ(20,"th"),a._uU(21,"Summary"),a.qZA(),a.TgZ(22,"th"),a._uU(23,"Created At"),a.qZA(),a.TgZ(24,"th"),a._uU(25,"Status"),a.qZA(),a.TgZ(26,"th",9),a._uU(27,"Actions"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(28,"tbody",10),a.YNc(29,q,20,9,"tr",11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(30,"div",12,13),a.TgZ(32,"div",14),a.TgZ(33,"div",15),a.TgZ(34,"div",16),a.TgZ(35,"h4",17),a._uU(36),a.qZA(),a.TgZ(37,"button",18),a.NdJ("click",function(){return t.closeModel()}),a.TgZ(38,"span",19),a._uU(39,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(40,"div",20),a.TgZ(41,"div",21),a.TgZ(42,"div",22),a.TgZ(43,"label",23),a._uU(44," Service Module "),a.TgZ(45,"sup",24),a._UZ(46,"i",25),a.qZA(),a.qZA(),a.TgZ(47,"input",26),a.NdJ("ngModelChange",function(e){return t.serviceModulesInfo.serviceModule=e})("ngModelChange",function(){return t.serviceExistCheck(t.serviceModulesInfo)}),a.qZA(),a.YNc(48,A,2,0,"p",27),a.qZA(),a.TgZ(49,"div",22),a.TgZ(50,"label",28),a._uU(51," Time Required in Hrs "),a.TgZ(52,"sup",24),a._UZ(53,"i",25),a.qZA(),a.qZA(),a.TgZ(54,"input",29),a.NdJ("ngModelChange",function(e){return t.serviceModulesInfo.timeRequired=e}),a.qZA(),a.qZA(),a.TgZ(55,"div",22),a.TgZ(56,"label",30),a._uU(57,"Summary "),a.TgZ(58,"sup",24),a._UZ(59,"i",25),a.qZA(),a.qZA(),a.TgZ(60,"textarea",31),a.NdJ("ngModelChange",function(e){return t.serviceModulesInfo.summary=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(61,"app-alert"),a.TgZ(62,"div",32),a.TgZ(63,"button",33),a.NdJ("click",function(){return t.addService()}),a._uU(64),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(65,"div",12,34),a.TgZ(67,"div",35),a.TgZ(68,"div",15),a.TgZ(69,"div",16),a.TgZ(70,"h4",17),a._UZ(71,"i",36),a._uU(72," Delete Service Module"),a.qZA(),a.TgZ(73,"button",18),a.NdJ("click",function(){return t.closeModel()}),a.TgZ(74,"span",19),a._uU(75,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(76,"div",20),a.TgZ(77,"h4"),a._uU(78,"Are you sure want to delete this Service Module?"),a.qZA(),a.TgZ(79,"p"),a.TgZ(80,"b"),a._uU(81,"Service Module :"),a.qZA(),a._uU(82),a._UZ(83,"br"),a.qZA(),a.qZA(),a.TgZ(84,"div",37),a.TgZ(85,"button",38),a.NdJ("click",function(){return t.closeModel()}),a._uU(86,"Close"),a.qZA(),a.TgZ(87,"button",39),a.NdJ("click",function(){return t.deleteService()}),a._uU(88,"Delete"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(11),a.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),a.xp6(18),a.Q6J("ngForOf",t.serviceModulesList),a.xp6(1),a.Q6J("config",a.DdM(15,T)),a.xp6(6),a.hij("",t.serviceModulesInfo._id?"Edit":"Add"," Service Module"),a.xp6(9),a.Q6J("ngClass",t.checkvalidation("serviceModule")),a.xp6(2),a.Q6J("ngModel",t.serviceModulesInfo.serviceModule),a.xp6(1),a.Q6J("ngIf",t.checkserviceExists),a.xp6(4),a.Q6J("ngClass",t.checkvalidation("timeRequired")),a.xp6(2),a.Q6J("ngModel",t.serviceModulesInfo.timeRequired),a.xp6(4),a.Q6J("ngClass",t.checkvalidation("summary")),a.xp6(2),a.Q6J("ngModel",t.serviceModulesInfo.summary),a.xp6(4),a.hij("",t.serviceModulesInfo._id?"Update":"Add"," "),a.xp6(1),a.Q6J("config",a.DdM(16,T)),a.xp6(17),a.hij(" ",t.serviceModulesInfo.serviceModule," "))},directives:[o.G,s.sg,d.oB,s.mk,Z.Fj,Z.nD,v.y,Z.JJ,Z.On,s.O5,M.Y,f.w,p.o],pipes:[s.uU],styles:[""]}),e})(),pathMatch:"full"}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.Bz.forChild(S)],r.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.ez,u.eY,x]]}),e})()}}]);