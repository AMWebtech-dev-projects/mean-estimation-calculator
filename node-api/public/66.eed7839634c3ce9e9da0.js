(self.webpackChunkangular=self.webpackChunkangular||[]).push([[66],{7066:(t,e,o)=>{"use strict";o.r(e),o.d(e,{SavedProposalModule:()=>T});var s=o(2057),a=o(6090),i=o(7988),r=o(5551),l=o(9765),n=o(2340),d=o(793),c=o(6633),p=o(9866),h=o(9699);const u=["deleteProposalModal"];function g(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"th",22),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.ALo(11,"date"),d.qZA(),d.TgZ(12,"td",6),d.TgZ(13,"div",23),d.TgZ(14,"button",24),d.NdJ("click",function(){const e=d.CHM(t).$implicit;return d.oxw().editProposal(e)}),d._UZ(15,"i",25),d.qZA(),d.TgZ(16,"button",26),d.NdJ("click",function(){const e=d.CHM(t).$implicit;return d.oxw().showDeleteModal(e)}),d._UZ(17,"i",27),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit,o=e.index;d.xp6(2),d.Oqu(o+1),d.xp6(2),d.Oqu(t.projectName),d.xp6(2),d.Oqu(t.type),d.xp6(2),d.Oqu(t.tags),d.xp6(2),d.Oqu(d.xi3(11,5,t.createdAt,"d/M/yyyy"))}}const Z=function(){return{backdrop:"static",keyboard:!1,animated:!0}},f=[{path:"",component:(()=>{class t{constructor(t,e,o,s,a){this.router=t,this.savedProposalService=e,this.spinner=o,this.toastr=s,this.globalService=a,this.subject=new l.xQ,this.title="Manage Proposal | Estimation Calculator",this.proposalsList=[],this.datatableElement=i.G,this.dtOptions={},this.dtTrigger=new l.xQ,this.savedProposalInfo={},this.calculationType=n.N.calculationType,this.deleteProposalModal=r.oB,this.getProposalList()}ngOnInit(){this.dtOptions={responsive:!0,scrollX:!0,scrollY:"350px",scrollCollapse:!0,columnDefs:[{targets:3,orderable:!1,visible:!1,searchable:!0},{targets:5,orderable:!1,searchable:!1}]},this.globalService.getPageTitle(this.title)}ngAfterViewInit(){this.dtTrigger.next()}getProposalList(){this.savedProposalService.getProposal({status:1}).subscribe(t=>{this.spinner.show(),200===t.status&&(this.spinner.hide(),this.datatableElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next(),this.proposalsList=t.data,this.spinner.hide()}))},t=>{this.spinner.hide(),this.toastr.error(t.message,"Error!")})}editProposal(t){this.savedProposalInfo=t,this.savedProposalInfo&&(this.savedProposalInfo.type===this.calculationType.hourly?this.router.navigate(["/hourly",this.savedProposalInfo._id]):this.savedProposalInfo.type===this.calculationType.resources?this.router.navigate(["/resources",this.savedProposalInfo._id]):this.savedProposalInfo.type===this.calculationType.bundle?this.router.navigate(["/bundles",this.savedProposalInfo._id]):this.savedProposalInfo.type===this.calculationType.package&&this.router.navigate(["/packages",this.savedProposalInfo._id]))}showDeleteModal(t){this.savedProposalInfo=t,this.deleteProposalModal.show()}closeModel(){this.deleteProposalModal.hide()}deleteProposal(){this.spinner.show(),this.savedProposalService.deleteProposal(this.savedProposalInfo).subscribe(t=>{200===t.status&&(this.closeModel(),this.spinner.hide(),this.getProposalList(),this.toastr.success(t.message,"Success"))},t=>{this.closeModel(),this.spinner.hide(),this.toastr.error("There are some server error.Please check connection.","Error")})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(a.F0),d.Y36(c.cC),d.Y36(p.t2),d.Y36(h._W),d.Y36(c.Uh))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-saved-proposal"]],viewQuery:function(t,e){if(1&t&&(d.Gf(i.G,5),d.Gf(u,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.datatableElement=t.first),d.iGM(t=d.CRH())&&(e.deleteProposalModal=t.first)}},decls:47,vars:6,consts:[[1,"d-flex","flex-row"],[1,"col-12"],[1,"opacity-50"],[1,"container-fluid","app-region","bg-white","py-3","dataDisplaySection"],["datatable","",1,"table","table-bordered","table-hover","table-striped",3,"dtOptions","dtTrigger"],[1,"text-nowrap"],[1,"text-center"],[1,"text-wrap"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"config"],["deleteProposalModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"fa","fa-trash"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer","border-top-0","d-flex","justify-content-start"],["type","button",1,"btn","btn-default","me-1",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["scope","row"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","edit","me-1",3,"click"],[1,"far","fa-edit"],["type","button",1,"btn","btn-sm","delete",3,"click"],[1,"far","fa-trash-alt"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h4",2),d._uU(3,"Manage Saved Calculations"),d.qZA(),d._UZ(4,"hr"),d.qZA(),d.qZA(),d.TgZ(5,"div",3),d.TgZ(6,"table",4),d.TgZ(7,"thead"),d.TgZ(8,"tr",5),d.TgZ(9,"th"),d._uU(10,"S.No"),d.qZA(),d.TgZ(11,"th"),d._uU(12,"Project Name"),d.qZA(),d.TgZ(13,"th"),d._uU(14,"Type"),d.qZA(),d.TgZ(15,"th"),d._uU(16,"Tag"),d.qZA(),d.TgZ(17,"th"),d._uU(18,"Created At"),d.qZA(),d.TgZ(19,"th",6),d._uU(20,"Actions"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"tbody",7),d.YNc(22,g,18,8,"tr",8),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"div",9,10),d.TgZ(25,"div",11),d.TgZ(26,"div",12),d.TgZ(27,"div",13),d.TgZ(28,"h4",14),d._UZ(29,"i",15),d._uU(30," Delete Proposal"),d.qZA(),d.TgZ(31,"button",16),d.NdJ("click",function(){return e.closeModel()}),d.TgZ(32,"span",17),d._uU(33,"\xd7"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(34,"div",18),d.TgZ(35,"h4"),d._uU(36,"Are you sure want to delete this Proposal?"),d.qZA(),d.TgZ(37,"p"),d.TgZ(38,"b"),d._uU(39,"Proposal :"),d.qZA(),d._uU(40),d._UZ(41,"br"),d.qZA(),d.qZA(),d.TgZ(42,"div",19),d.TgZ(43,"button",20),d.NdJ("click",function(){return e.closeModel()}),d._uU(44,"Close"),d.qZA(),d.TgZ(45,"button",21),d.NdJ("click",function(){return e.deleteProposal()}),d._uU(46,"Delete"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(6),d.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),d.xp6(16),d.Q6J("ngForOf",e.proposalsList),d.xp6(1),d.Q6J("config",d.DdM(5,Z)),d.xp6(17),d.hij(" ",e.savedProposalInfo.projectName," "))},directives:[i.G,s.sg,r.oB],pipes:[s.uU],styles:[""]}),t})(),pathMatch:"full"}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[a.Bz.forChild(f)],a.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[s.ez,b,c.eY]]}),t})()}}]);