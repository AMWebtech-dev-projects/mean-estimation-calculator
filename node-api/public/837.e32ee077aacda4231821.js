(self.webpackChunkangular=self.webpackChunkangular||[]).push([[837],{4837:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ServicePackagesModule:()=>y});var i=s(2057),a=s(6090),r=s(7988),n=s(5551),c=s(9765);class o{constructor(){this.servicePackage="",this.serviceId="",this.essential={timeFrame:"",total:0,fixed:0,recursive:0},this.professional={timeFrame:"",total:0,fixed:0,recursive:0},this.enterprise={timeFrame:"",total:0,fixed:0,recursive:0},this.status=1,this.filterBundlesList=[]}}class l{constructor(){this.servicePackage="",this.serviceId="",this.essential="",this.professional="",this.enterprise=""}}var g=s(793),d=s(6633),u=s(9866),h=s(9699),Z=s(5921),p=s(3738),f=s(337),v=s(6355);function m(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e._id),g.xp6(1),g.hij(" ",e.serviceName," ")}}function k(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e),g.xp6(1),g.hij(" ",e.label," ")}}function T(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e),g.xp6(1),g.hij(" ",e.label," ")}}function P(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e),g.xp6(1),g.hij(" ",e.label," ")}}function q(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g.TgZ(6,"input",30),g.NdJ("ngModelChange",function(t){return g.CHM(e).$implicit.essential=t})("ngModelChange",function(){return g.CHM(e),g.oxw().calculations("essential")}),g.qZA(),g.qZA(),g.TgZ(7,"td"),g.TgZ(8,"input",30),g.NdJ("ngModelChange",function(t){return g.CHM(e).$implicit.professional=t})("ngModelChange",function(){return g.CHM(e),g.oxw().calculations("professional")}),g.qZA(),g.qZA(),g.TgZ(9,"td"),g.TgZ(10,"input",30),g.NdJ("ngModelChange",function(t){return g.CHM(e).$implicit.enterprise=t})("ngModelChange",function(){return g.CHM(e),g.oxw().calculations("enterprise")}),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,s=t.index,i=g.oxw();g.xp6(2),g.Oqu(e.serviceBundle),g.xp6(2),g.Oqu(i.showType(e.type)),g.xp6(2),g.MGl("id","essential_",s,""),g.Q6J("disabled",!i.servicePackagesInfo.essential.timeFrame)("ngModel",e.essential),g.xp6(2),g.MGl("id","professional_",s,""),g.Q6J("disabled",!i.servicePackagesInfo.professional.timeFrame)("ngModel",e.professional),g.xp6(2),g.MGl("id","enterprise_",s,""),g.Q6J("disabled",!i.servicePackagesInfo.enterprise.timeFrame)("ngModel",e.enterprise)}}let b=(()=>{class e{constructor(e,t,s,i,a,r,n,g,d){this.router=e,this.bundlesService=t,this.jwtService=s,this.manageService=i,this.servicePackagesService=a,this.alertService=r,this.spinner=n,this.toastr=g,this.globalService=d,this.title="Create Service Package | Estimation Calculator",this.servicePackagesInfo=new o,this.servicePackagesList=[],this.manageServicesList=[],this.checkserviceExists=!1,this.dtTrigger=new c.xQ,this.config={},this.timeFrameBundleValues=[],this.typeList=[],this.requiredValidation=new l,this.getManageServicesList()}ngOnInit(){this.config=this.jwtService.getConfig(),this.timeFrameBundleValues=this.config.timeFrameBundle,this.typeList=this.config.type}getManageServicesList(){this.manageService.getManageServices({status:1}).subscribe(e=>{this.spinner.show(),200===e.status&&(this.spinner.hide(),this.manageServicesList=e=e.data)},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}filterListByService(e){let t=this.servicePackagesInfo.servicePackage;e?this.bundlesService.getBundlesList({serviceId:e}).subscribe(s=>{this.spinner.show(),this.servicePackagesInfo=new o,this.servicePackagesInfo.servicePackage=t,this.servicePackagesInfo.serviceId=e,200===s.status&&(this.spinner.hide(),(s=s.data).length?(this.servicePackagesInfo.filterBundlesList=s,this.setResetTimeFrame()):this.toastr.warning("There are not bundles of this service.","Warning!"))},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")}):(this.servicePackagesInfo=new o,this.servicePackagesInfo.servicePackage=t,this.toastr.warning("Please select any service.","Warning!"))}setResetTimeFrame(e){let t=Object.assign({},this.servicePackagesInfo);t.filterBundlesList.map(s=>{e?t[e].timeFrame||(s[e]=!1):(s.essential=!1,s.professional=!1,s.enterprise=!1)}),e&&this.calculations(e)}calculations(e){let t=0,s=0;this.servicePackagesInfo.filterBundlesList.map(i=>{i[e]&&(1===i.type?t+=i.servicePrice:s+=i.servicePrice)});let i=Object.assign({},this.servicePackagesInfo);i[e].fixed=t,i[e].recursive=s,i[e].total=Math.round(t+s*i[e].timeFrame.factor),this.servicePackagesInfo=Object.assign({},i)}showType(e){if(this.typeList&&this.typeList.length){let t=this.typeList.find(t=>t.value===e);return t?t.label:""}return""}createPackage(){this.spinner.show();let e=JSON.parse(JSON.stringify(this.servicePackagesInfo)),t={servicePackage:e.servicePackage,serviceId:e.serviceId,essential:e.essential.total,professional:e.professional.total,enterprise:e.enterprise.total,status:e.status,packageData:JSON.stringify(e)};if(Object.keys(this.requiredValidation).filter(e=>!t[e]).length)return this.alertService.clear(),this.alertService.error("*Please Fill All Fields are mandatory."),this.spinner.hide(),!1;console.log("postPackage == ",t),this.servicePackagesService.saveServicePackage(t).subscribe(e=>{200===e.status&&(this.spinner.hide(),this.toastr.success(e.message,"Success!"),e=e.data,this.reloadCurrentPage())},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}reloadCurrentPage(){let e=this.router.url;this.router.navigateByUrl("/RefreshComponent",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(a.F0),g.Y36(d.i6),g.Y36(d.Tj),g.Y36(d.sp),g.Y36(d.mt),g.Y36(d.c9),g.Y36(u.t2),g.Y36(h._W),g.Y36(d.Uh))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-create-service-package"]],decls:106,vars:29,consts:[[1,"d-flex","flex-row"],[1,"col-12"],[1,"opacity-50"],[1,"container-fluid","app-region","bg-white","py-3","dataDisplaySection"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-sm","btn-primary","ms-3",3,"click"],[1,"row","g-3","mb-3"],[1,"col-md-6"],["for","servicePackage",1,"form-label"],[3,"ngClass"],[1,"fas","fa-star","fa-xs"],["type","text","id","servicePackage","maxlength","35","placeholder","Enter Service Package Name","name","servicePackage","characterOnly","",1,"form-control",3,"ngModel","ngModelChange"],["for","serviceId",1,"form-label"],["id","serviceId","name","serviceId",1,"form-select",3,"disabled","ngModel","ngModelChange","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,""],[1,"table-responsive-lg","mt-4"],[1,"table","table-bordered","table-hover","table-striped"],[1,"text-nowrap"],["for","essential",1,"form-label"],["id","essential","name","essential",1,"form-select",3,"disabled","ngModel","ngModelChange"],["for","professional",1,"form-label"],["id","professional","name","professional",1,"form-select",3,"disabled","ngModel","ngModelChange"],["for","enterprise",1,"form-label"],["id","enterprise","name","enterprise",1,"form-select",3,"disabled","ngModel","ngModelChange","click"],[4,"ngFor","ngForOf"],[1,"table","table-striped","table-bordered","table-hover"],["type","submit",1,"btn","btn-primary","mt-2",3,"click"],[3,"ngValue"],["type","checkbox",1,"form-check-input",3,"disabled","id","ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h4",2),g.TgZ(3,"h4"),g._uU(4,"Create Service Package"),g.qZA(),g.qZA(),g._UZ(5,"hr"),g.qZA(),g.qZA(),g.TgZ(6,"div",3),g.TgZ(7,"div",4),g.TgZ(8,"div"),g.TgZ(9,"button",5),g.NdJ("click",function(){return t.reloadCurrentPage()}),g._uU(10,"Back"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(11,"div",6),g.TgZ(12,"div",7),g.TgZ(13,"label",8),g._uU(14,"Package Name "),g.TgZ(15,"sup",9),g._UZ(16,"i",10),g.qZA(),g.qZA(),g.TgZ(17,"input",11),g.NdJ("ngModelChange",function(e){return t.servicePackagesInfo.servicePackage=e}),g.qZA(),g.qZA(),g.TgZ(18,"div",7),g.TgZ(19,"label",12),g._uU(20,"Choose Service "),g.TgZ(21,"sup",9),g._UZ(22,"i",10),g.qZA(),g.qZA(),g.TgZ(23,"select",13),g.NdJ("ngModelChange",function(e){return t.servicePackagesInfo.serviceId=e})("change",function(){return t.filterListByService(t.servicePackagesInfo.serviceId)}),g.TgZ(24,"option",14),g._uU(25,"Select Service"),g.qZA(),g.YNc(26,m,2,2,"option",15),g.qZA(),g.qZA(),g.qZA(),g.TgZ(27,"div",16),g.TgZ(28,"div",17),g.TgZ(29,"table",18),g.TgZ(30,"thead"),g.TgZ(31,"tr",19),g.TgZ(32,"th"),g._uU(33,"Bundle Name"),g.qZA(),g.TgZ(34,"th"),g._uU(35,"Type"),g.qZA(),g.TgZ(36,"th"),g.TgZ(37,"label",20),g._uU(38,"Essential"),g.qZA(),g.TgZ(39,"select",21),g.NdJ("ngModelChange",function(e){return t.servicePackagesInfo.essential.timeFrame=e})("ngModelChange",function(){return t.setResetTimeFrame("essential")}),g.TgZ(40,"option",14),g._uU(41,"Select"),g.qZA(),g.YNc(42,k,2,2,"option",15),g.qZA(),g.qZA(),g.TgZ(43,"th"),g.TgZ(44,"label",22),g._uU(45,"Professional"),g.qZA(),g.TgZ(46,"select",23),g.NdJ("ngModelChange",function(e){return t.servicePackagesInfo.professional.timeFrame=e})("ngModelChange",function(){return t.setResetTimeFrame("professional")}),g.TgZ(47,"option",14),g._uU(48,"Select"),g.qZA(),g.YNc(49,T,2,2,"option",15),g.qZA(),g.qZA(),g.TgZ(50,"th"),g.TgZ(51,"label",24),g._uU(52,"Enterprise"),g.qZA(),g.TgZ(53,"select",25),g.NdJ("ngModelChange",function(e){return t.servicePackagesInfo.enterprise.timeFrame=e})("click",function(){return t.setResetTimeFrame("enterprise")}),g.TgZ(54,"option",14),g._uU(55,"Select"),g.qZA(),g.YNc(56,P,2,2,"option",15),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(57,"tbody"),g.YNc(58,q,11,11,"tr",26),g.qZA(),g.qZA(),g.qZA(),g.TgZ(59,"div",17),g.TgZ(60,"table",27),g.TgZ(61,"thead"),g.TgZ(62,"tr"),g.TgZ(63,"th"),g._uU(64,"Package Name"),g.qZA(),g.TgZ(65,"th"),g._uU(66,"Essential Total"),g.qZA(),g.TgZ(67,"th"),g._uU(68,"Professional Total"),g.qZA(),g.TgZ(69,"th"),g._uU(70,"Enterprise Total"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(71,"tbody"),g.TgZ(72,"tr"),g.TgZ(73,"td"),g._uU(74),g.qZA(),g.TgZ(75,"td"),g._uU(76,"Total : "),g.TgZ(77,"span",9),g._uU(78),g.qZA(),g.qZA(),g.TgZ(79,"td"),g._uU(80,"Total : "),g.TgZ(81,"span",9),g._uU(82),g.qZA(),g.qZA(),g.TgZ(83,"td"),g._uU(84,"Total : "),g.TgZ(85,"span",9),g._uU(86),g.qZA(),g.qZA(),g.qZA(),g.TgZ(87,"tr"),g._UZ(88,"td"),g.TgZ(89,"td"),g._uU(90),g.qZA(),g.TgZ(91,"td"),g._uU(92),g.qZA(),g.TgZ(93,"td"),g._uU(94),g.qZA(),g.qZA(),g.TgZ(95,"tr"),g._UZ(96,"td"),g.TgZ(97,"td"),g._uU(98),g.qZA(),g.TgZ(99,"td"),g._uU(100),g.qZA(),g.TgZ(101,"td"),g._uU(102),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(103,"app-alert"),g.TgZ(104,"button",28),g.NdJ("click",function(){return t.createPackage()}),g._uU(105,"Save"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(15),g.Q6J("ngClass",t.servicePackagesInfo.servicePackage?"text-primary":"text-danger"),g.xp6(2),g.Q6J("ngModel",t.servicePackagesInfo.servicePackage),g.xp6(4),g.Q6J("ngClass",t.servicePackagesInfo.serviceId?"text-primary":"text-danger"),g.xp6(2),g.Q6J("disabled",!t.servicePackagesInfo.servicePackage)("ngModel",t.servicePackagesInfo.serviceId),g.xp6(3),g.Q6J("ngForOf",t.manageServicesList),g.xp6(13),g.Q6J("disabled",!t.servicePackagesInfo.filterBundlesList.length)("ngModel",t.servicePackagesInfo.essential.timeFrame),g.xp6(3),g.Q6J("ngForOf",t.timeFrameBundleValues),g.xp6(4),g.Q6J("disabled",!t.servicePackagesInfo.filterBundlesList.length)("ngModel",t.servicePackagesInfo.professional.timeFrame),g.xp6(3),g.Q6J("ngForOf",t.timeFrameBundleValues),g.xp6(4),g.Q6J("disabled",!t.servicePackagesInfo.filterBundlesList.length)("ngModel",t.servicePackagesInfo.enterprise.timeFrame),g.xp6(3),g.Q6J("ngForOf",t.timeFrameBundleValues),g.xp6(2),g.Q6J("ngForOf",t.servicePackagesInfo.filterBundlesList),g.xp6(16),g.Oqu(t.servicePackagesInfo.servicePackage),g.xp6(3),g.Q6J("ngClass",t.servicePackagesInfo.essential.total?"text-primary":"text-danger"),g.xp6(1),g.Oqu(t.servicePackagesInfo.essential.total?t.servicePackagesInfo.essential.total:"Please Calculate First"),g.xp6(3),g.Q6J("ngClass",t.servicePackagesInfo.professional.total?"text-primary":"text-danger"),g.xp6(1),g.Oqu(t.servicePackagesInfo.professional.total?t.servicePackagesInfo.professional.total:"Please Calculate First"),g.xp6(3),g.Q6J("ngClass",t.servicePackagesInfo.enterprise.total?"text-primary":"text-danger"),g.xp6(1),g.Oqu(t.servicePackagesInfo.enterprise.total?t.servicePackagesInfo.enterprise.total:"Please Calculate First"),g.xp6(4),g.hij("Fixed : ",t.servicePackagesInfo.essential.fixed?t.servicePackagesInfo.essential.fixed:0,""),g.xp6(2),g.hij("Fixed : ",t.servicePackagesInfo.professional.fixed?t.servicePackagesInfo.professional.fixed:0,""),g.xp6(2),g.hij("Fixed : ",t.servicePackagesInfo.enterprise.fixed?t.servicePackagesInfo.enterprise.fixed:0,""),g.xp6(4),g.hij("Recursive : ",t.servicePackagesInfo.essential.recursive?t.servicePackagesInfo.essential.recursive+"*"+t.servicePackagesInfo.essential.timeFrame.label+"/Monthly":0,""),g.xp6(2),g.hij("Recursive : ",t.servicePackagesInfo.professional.recursive?t.servicePackagesInfo.professional.recursive+"*"+t.servicePackagesInfo.professional.timeFrame.label+"/Monthly":0,""),g.xp6(2),g.hij("Recursive : ",t.servicePackagesInfo.enterprise.recursive?t.servicePackagesInfo.enterprise.recursive+"*"+t.servicePackagesInfo.enterprise.timeFrame.label+"/Monthly":0,""))},directives:[i.mk,p.Fj,p.nD,f.y,p.JJ,p.On,p.EJ,p.YN,p.Kr,i.sg,v.w,p.Wl],styles:[".table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{vertical-align:top}button[disabled][_ngcontent-%COMP%], input[disabled][_ngcontent-%COMP%], select[disabled][_ngcontent-%COMP%]{cursor:no-drop;pointer-events:all!important}"]}),e})();const A=["deletePackageModal"];function x(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"th",26),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td"),g._uU(8),g.qZA(),g.TgZ(9,"td"),g._uU(10),g.qZA(),g.TgZ(11,"td"),g._uU(12),g.qZA(),g.TgZ(13,"td"),g._uU(14),g.ALo(15,"date"),g.qZA(),g.TgZ(16,"td"),g.TgZ(17,"ui-switch",27),g.NdJ("change",function(){const t=g.CHM(e).$implicit;return g.oxw(2).changeServiceStatus(t)})("ngModelChange",function(t){return g.CHM(e).$implicit.status=t}),g.qZA(),g.qZA(),g.TgZ(18,"td",10),g.TgZ(19,"div",28),g.TgZ(20,"button",29),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).showDeleteModal(t)}),g._UZ(21,"i",30),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,s=t.index,i=g.oxw(2);g.xp6(2),g.Oqu(s+1),g.xp6(2),g.Oqu(e.servicePackage),g.xp6(2),g.Oqu(i.showServiceName(e.serviceId)),g.xp6(2),g.Oqu(e.essential),g.xp6(2),g.Oqu(e.professional),g.xp6(2),g.Oqu(e.enterprise),g.xp6(2),g.Oqu(g.xi3(15,8,e.createdAt,"d/M/yyyy")),g.xp6(3),g.Q6J("ngModel",e.status)}}const M=function(){return{backdrop:"static",keyboard:!1,animated:!0}};function _(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"h4",3),g.TgZ(4,"h4"),g._uU(5,"Manage Service Packages"),g.qZA(),g.qZA(),g._UZ(6,"hr"),g.qZA(),g.qZA(),g.TgZ(7,"div",4),g.TgZ(8,"div",5),g.TgZ(9,"div"),g.TgZ(10,"button",6),g.NdJ("click",function(){return g.CHM(e),g.oxw().createPackage()}),g._UZ(11,"i",7),g._uU(12,"Add New"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"table",8),g.TgZ(14,"thead"),g.TgZ(15,"tr",9),g.TgZ(16,"th"),g._uU(17,"S.No"),g.qZA(),g.TgZ(18,"th"),g._uU(19,"Package Name"),g.qZA(),g.TgZ(20,"th"),g._uU(21,"Service Name"),g.qZA(),g.TgZ(22,"th"),g._uU(23,"Essential"),g.qZA(),g.TgZ(24,"th"),g._uU(25,"Professional"),g.qZA(),g.TgZ(26,"th"),g._uU(27,"Enterprise"),g.qZA(),g.TgZ(28,"th"),g._uU(29,"Created At"),g.qZA(),g.TgZ(30,"th"),g._uU(31,"Status"),g.qZA(),g.TgZ(32,"th",10),g._uU(33,"Actions"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(34,"tbody",11),g.YNc(35,x,22,11,"tr",12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(36,"div",13,14),g.TgZ(38,"div",15),g.TgZ(39,"div",16),g.TgZ(40,"div",17),g.TgZ(41,"h4",18),g._UZ(42,"i",19),g._uU(43," Delete Service"),g.qZA(),g.TgZ(44,"button",20),g.NdJ("click",function(){return g.CHM(e),g.oxw().closeModel()}),g.TgZ(45,"span",21),g._uU(46,"\xd7"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(47,"div",22),g.TgZ(48,"h4"),g._uU(49,"Are you sure want to delete this Service Package?"),g.qZA(),g.TgZ(50,"p"),g.TgZ(51,"b"),g._uU(52,"Service Package :"),g.qZA(),g._uU(53),g._UZ(54,"br"),g.qZA(),g.qZA(),g.TgZ(55,"div",23),g.TgZ(56,"button",24),g.NdJ("click",function(){return g.CHM(e),g.oxw().closeModel()}),g._uU(57,"Close"),g.qZA(),g.TgZ(58,"button",25),g.NdJ("click",function(){return g.CHM(e),g.oxw().deleteService()}),g._uU(59,"Delete"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(13),g.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),g.xp6(22),g.Q6J("ngForOf",e.servicePackagesList),g.xp6(1),g.Q6J("config",g.DdM(5,M)),g.xp6(17),g.hij(" ",e.servicePackagesInfo.servicePackage," ")}}function I(e,t){1&e&&(g.TgZ(0,"div"),g._UZ(1,"app-create-service-package"),g.qZA())}const S=[{path:"",component:(()=>{class e{constructor(e,t,s,i,a,l,g){this.router=e,this.servicePackagesService=t,this.alertService=s,this.spinner=i,this.toastr=a,this.globalService=l,this.manageService=g,this.title="Manage Service Packages | Estimation Calculator",this.servicePackagesInfo=new o,this.servicePackagesList=[],this.datatableElement=r.G,this.dtOptions={},this.dtTrigger=new c.xQ,this.createPackageshow=!1,this.manageServicesList=[],this.deletePackageModal=n.oB}ngOnInit(){this.getServicePackagesList(),this.getManageServicesList(),this.dtOptions={responsive:!0,scrollX:!0,scrollY:"350px",scrollCollapse:!0,columnDefs:[{targets:7,orderable:!1,searchable:!1},{targets:8,orderable:!1,searchable:!1}]},this.globalService.getPageTitle(this.title)}ngAfterViewInit(){this.dtTrigger.next()}getManageServicesList(){this.manageService.getManageServices({status:1}).subscribe(e=>{this.spinner.show(),200===e.status&&(this.spinner.hide(),this.manageServicesList=e=e.data)},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}getServicePackagesList(){this.servicePackagesService.getservicePackages().subscribe(e=>{this.spinner.show(),200===e.status&&(this.spinner.hide(),this.datatableElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(),this.servicePackagesList=e.data,this.spinner.hide()}))},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}createPackage(){this.createPackageshow=!0}changeServiceStatus(e){this.servicePackagesService.saveServicePackage({_id:e._id,status:e.status?0:1}).subscribe(e=>{if(200===e.status){this.spinner.hide(),e=e.data,this.toastr.success("Service status has been changed successfully.","Success!");let t=this.servicePackagesList.findIndex(t=>t._id===e._id);t&&(this.servicePackagesList[t].status=e.status)}},e=>{this.spinner.hide(),this.toastr.error(e.message,"Error!")})}showDeleteModal(e){this.servicePackagesInfo=e,this.deletePackageModal.show()}closeModel(){this.deletePackageModal.hide()}deleteService(){this.spinner.show(),this.servicePackagesService.deleteService(this.servicePackagesInfo).subscribe(e=>{200===e.status&&(this.closeModel(),this.spinner.hide(),this.getServicePackagesList(),this.toastr.success(e.message,"Success"))},e=>{this.closeModel(),this.spinner.hide(),this.toastr.error("There are some server error.Please check connection.","Error")})}showServiceName(e){if(this.manageServicesList&&this.manageServicesList.length){let t=this.manageServicesList.find(t=>t._id===e);return t?t.serviceName:""}return""}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(a.F0),g.Y36(d.mt),g.Y36(d.c9),g.Y36(u.t2),g.Y36(h._W),g.Y36(d.Uh),g.Y36(d.sp))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-overview-service-package"]],viewQuery:function(e,t){if(1&e&&(g.Gf(r.G,5),g.Gf(A,5)),2&e){let e;g.iGM(e=g.CRH())&&(t.datatableElement=e.first),g.iGM(e=g.CRH())&&(t.deletePackageModal=e.first)}},decls:2,vars:2,consts:[[4,"ngIf"],[1,"d-flex","flex-row"],[1,"col-12"],[1,"opacity-50"],[1,"container-fluid","app-region","bg-white","py-3","dataDisplaySection"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-sm","btn-primary","ms-3",3,"click"],[1,"fas","fa-plus","me-2"],["datatable","",1,"table","table-bordered","table-hover","table-striped",3,"dtOptions","dtTrigger"],[1,"text-nowrap"],[1,"text-center"],[1,"text-wrap"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"config"],["deletePackageModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"fa","fa-trash"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer","border-top-0","d-flex","justify-content-start"],["type","button",1,"btn","btn-default","me-1",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["scope","row"],["color","#4285F4","defaultBgColor","#d9d9d9","labelOn","Active","labelOff","Inactive",3,"ngModel","change","ngModelChange"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","delete",3,"click"],[1,"far","fa-trash-alt"]],template:function(e,t){1&e&&(g.YNc(0,_,60,6,"div",0),g.YNc(1,I,2,0,"div",0)),2&e&&(g.Q6J("ngIf",!t.createPackageshow),g.xp6(1),g.Q6J("ngIf",t.createPackageshow))},directives:[i.O5,r.G,i.sg,n.oB,Z.o,p.JJ,p.On,b],pipes:[i.uU],styles:[""]}),e})(),pathMatch:"full"}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[a.Bz.forChild(S)],a.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,d.eY,U]]}),e})()}}]);